---
description: Best practices for Vue Page components and routes in Editora Sabia V2 monorepo
globs: apps/*/app/pages/**/*.vue
alwaysApply: false
---

# Vue Pages - Nuxt 4 Monorepo Structure

This project uses **Nuxt 4 file-based routing** across three applications. Each app in `apps/*/app/pages/` defines its own routes using Vue Router under the hood.

## ğŸ—ï¸ **App-Specific Pages Structure**

Each app has its own routing:
- **Website** (`apps/website/app/pages/`) - Main marketing site
- **Ecommerce** (`apps/ecommerce/app/pages/`) - Online store and checkout
- **Editorial** (`apps/editorial/app/pages/`) - Content management system

## ğŸ“‹ **Page Component Rules**

### **ğŸ§© Component Patterns**
- **ALWAYS use Composition API** with `<script setup>`
- **ALWAYS use JavaScript**, NEVER TypeScript in page components
- **Use shared components** from `packages/layer/components/` (auto-imported)
- **Use shared composables** from `packages/layer/composables/` (auto-imported)
- **Use brand colors** from Tailwind CSS configuration
- **Add meaningful comments** that explain why, not what

### **ğŸ“ File Naming Conventions**
- **AVOID** files named `index.vue` - use route groups instead: `(home).vue`
- **Use explicit parameter names**: `userId` over `id`, `productSlug` over `slug`, `categoryName` over `name`
- **Use dots for flat routes**: `products.edit.vue` â†’ `/products/edit`
- **Use double brackets** for optional params: `[[categoryId]]`
- **Use plus modifier** for repeatable params: `posts.[[slug]]+.vue`

## ğŸ¯ **App-Specific Examples**

### **Website App** (`apps/website/app/pages/`)
```
app/pages/
â”œâ”€â”€ (home).vue              # Landing page: /
â”œâ”€â”€ sobre.vue               # About page: /sobre  
â”œâ”€â”€ contato.vue             # Contact: /contato
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ (blog-home).vue     # Blog list: /blog
â”‚   â”œâ”€â”€ categoria/
â”‚   â”‚   â””â”€â”€ [categoriaId].vue # Category: /blog/categoria/fiction
â”‚   â””â”€â”€ [postSlug].vue      # Post: /blog/meu-primeiro-livro
â””â”€â”€ [...path].vue           # 404 catch-all
```

### **Ecommerce App** (`apps/ecommerce/app/pages/`)
```
app/pages/
â”œâ”€â”€ (loja).vue              # Store home: /
â”œâ”€â”€ produtos/
â”‚   â”œâ”€â”€ (produtos-list).vue # Products: /produtos
â”‚   â”œâ”€â”€ categoria/
â”‚   â”‚   â””â”€â”€ [categoriaSlug].vue # Category: /produtos/categoria/ficcao
â”‚   â””â”€â”€ [produtoSlug].vue   # Product: /produtos/dom-casmurro
â”œâ”€â”€ carrinho.vue            # Cart: /carrinho
â”œâ”€â”€ checkout/
â”‚   â”œâ”€â”€ (checkout-home).vue # Checkout: /checkout
â”‚   â”œâ”€â”€ pagamento.vue       # Payment: /checkout/pagamento
â”‚   â””â”€â”€ confirmacao.vue     # Confirmation: /checkout/confirmacao
â”œâ”€â”€ conta/
â”‚   â”œâ”€â”€ (perfil).vue        # Profile: /conta
â”‚   â”œâ”€â”€ pedidos.vue         # Orders: /conta/pedidos
â”‚   â””â”€â”€ favoritos.vue       # Wishlist: /conta/favoritos
â””â”€â”€ [...path].vue           # 404 catch-all
```

### **Editorial App** (`apps/editorial/app/pages/`)
```
app/pages/
â”œâ”€â”€ (dashboard).vue         # Dashboard: /
â”œâ”€â”€ livros/
â”‚   â”œâ”€â”€ (livros-list).vue   # Books list: /livros
â”‚   â”œâ”€â”€ novo.vue            # New book: /livros/novo
â”‚   â”œâ”€â”€ [livroId].vue       # Book details: /livros/123
â”‚   â””â”€â”€ [livroId].editar.vue # Edit: /livros/123/editar
â”œâ”€â”€ autores/
â”‚   â”œâ”€â”€ (autores-list).vue  # Authors: /autores
â”‚   â”œâ”€â”€ novo.vue            # New author: /autores/novo
â”‚   â””â”€â”€ [autorId].vue       # Author: /autores/456
â”œâ”€â”€ vendas/
â”‚   â”œâ”€â”€ (vendas-dashboard).vue # Sales: /vendas
â”‚   â””â”€â”€ relatorios.vue      # Reports: /vendas/relatorios
â””â”€â”€ [...path].vue           # 404 catch-all
```

## ğŸ›¡ï¸ **Authentication & Protection**

### **Protected Routes Pattern**
```vue
<script setup>
// Use shared middleware from packages/layer/middleware/
definePageMeta({
  middleware: 'auth' // Shared auth middleware
})

// Or inline authentication check
const { user } = useAuth() // Shared composable
if (!user.value) {
  throw createError({
    statusCode: 401,
    statusMessage: 'Acesso negado'
  })
}
</script>
```

### **Route Groups with Layouts**
Use route groups for shared layouts:

```
app/pages/
â”œâ”€â”€ (admin).vue             # Admin layout component
â”œâ”€â”€ (admin)/
â”‚   â”œâ”€â”€ dashboard.vue       # /dashboard (uses admin layout)
â”‚   â””â”€â”€ configuracoes.vue   # /configuracoes (uses admin layout)
â””â”€â”€ (public)/
    â”œâ”€â”€ login.vue           # /login (uses public layout)
    â””â”€â”€ registro.vue        # /registro (uses public layout)
```

## âš¡ **Page Meta & SEO**

### **SEO-Optimized Pages**
```vue
<script setup>
// Use definePage for route customization
definePage({
  meta: {
    title: 'Livros de FicÃ§Ã£o - Editora Sabia',
    description: 'Explore nossa coleÃ§Ã£o de livros de ficÃ§Ã£o brasileira',
    keywords: 'livros, ficÃ§Ã£o, literatura brasileira'
  }
})

// Or use Nuxt's useSeoMeta
useSeoMeta({
  title: 'PÃ¡gina do Produto',
  description: 'DescriÃ§Ã£o do produto para SEO',
  ogTitle: 'Produto - Editora Sabia',
  ogDescription: 'DescriÃ§Ã£o para redes sociais',
  ogImage: '/images/produto-og.jpg'
})
</script>
```

## ğŸ¨ **Shared Components Integration**

### **Auto-Imported Components**
```vue
<template>
  <!-- Components from packages/layer/components/ -->
  <div class="min-h-screen bg-slate-50">
    <Button variant="primary" @click="handleCompra">
      Comprar Livro
    </Button>
    
    <Card class="mt-6">
      <h2 class="text-xl font-semibold text-gray-900">
        {{ livro.titulo }}
      </h2>
    </Card>
    
    <!-- Authentication form -->
    <LoginForm v-if="!user" />
  </div>
</template>

<script setup>
// Shared composables auto-imported
const { user } = useAuth()
const { addToCart } = useEcommerce()

function handleCompra() {
  addToCart(livro.value)
}
</script>
```

## ğŸš¨ **Important Notes**

1. **ğŸ¯ App-specific routing**: Each app has its own independent routing
2. **ğŸ”„ Shared components**: Use components from `packages/layer/components/`
3. **âš¡ Auto-imports**: Composables and components are auto-imported
4. **ğŸ¨ Brand consistency**: Use Tailwind brand colors across all apps
5. **ğŸ” Authentication**: Use shared auth middleware and composables
6. **ğŸ“± Responsive**: All pages should be mobile-first responsive
7. **ğŸŒ Portuguese**: Use Portuguese route names and content
8. **ğŸš€ Performance**: Lazy-load heavy components with `defineAsyncComponent`

## ğŸ” **Development Servers**

- **Website**: `http://localhost:3000` (already running)
- **Ecommerce**: `http://localhost:3001` (already running)  
- **Editorial**: `http://localhost:3002` (already running)

**Note**: Never start dev servers manually - they're already running with HMR enabled!